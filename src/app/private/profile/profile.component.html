<!-- Page Header-->
<header class="page-header">
	<div class="container-fluid">
		<h2 class="no-margin-bottom">Profile</h2>
	</div>
</header>
<section>
	<div class="container-fluid">
		<div [hidden]="!submitted">
			<div class="alert alert-success alert-dismissible fade show" role="alert">
				<strong>You submitted successfully!</strong>
				<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="times">&times;</span>
				</button>
			</div>
		</div>
		<div class="col-lg-12">
			<div class="card">
				<div class="card-close">
					<div class="dropdown">
						<button type="button" id="closeCard" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
							class="dropdown-toggle">
							<i class="fa fa-ellipsis-v"></i>
						</button>
						<div aria-labelledby="closeCard" class="dropdown-menu has-shadow">
							<a href="#" class="dropdown-item remove"> <i class="fa fa-times"></i>Close
							</a><a href="#" class="dropdown-item edit"> <i class="fa fa-gear"></i>Edit
							</a>
						</div>
					</div>
				</div>
				<div class="card-header d-flex align-items-center">
					<h3 class="h4">Update your profile</h3>
				</div>
				<div class="card-body">
					<form name="form" (ngSubmit)="onSubmit(userProfileForm)" #userProfileForm="ngForm">
						<div class="form-row">
    						<div class="col-lg-4">
								<div class="form-group">
									<label class="form-control-label">Firstname</label> 
									<input id="firstname" #firstname="ngModel" type="text" class="form-control form-control-sm" 
										required [(ngModel)]="userProfile && userProfile.firstname" name="firstname" minlength="4">
									<div *ngIf="firstname.invalid && (firstname.dirty || firstname.touched)" class="alert alert-danger">
										<div *ngIf="firstname.errors.required">Firstname is Required</div>
										<div *ngIf="firstname.errors.minlength">Firstname must be at least 4 characters long</div>
									</div>
									<!-- <div [hidden]="userProfile && (firstname.valid || firstname.pristine)" class="alert alert-danger">Firstname is required</div> -->
								</div>
							</div>
							<div class="col-lg-4">
								<div class="form-group">
									<label class="form-control-label">Lastname</label> 
									<input id="lastname" #lastname="ngModel" type="text" class="form-control form-control-sm" 
										required [(ngModel)]="userProfile && userProfile.lastname" name="lastname" minlength="4">
									<div *ngIf="lastname.invalid && (lastname.dirty || lastname.touched)" class="alert alert-danger">
										<div *ngIf="lastname.errors.required">Lastname is Required</div>
										<div *ngIf="lastname.errors.minlength">Lastname must be at least 4 characters long</div>
									</div>
								</div>
							</div>
						</div>
						<div class="form-row">
							<div class="col-lg-4">
								<div class="form-group">
									<label class="form-control-label">Role</label> 
									<select class="form-control form-control-sm" id="role" #role="ngModel" required [(ngModel)]="userProfile && userProfile.role" name="role">
										<option *ngFor="let role of roles" [ngValue]="role" 
											[attr.selected]="role.idRole === userProfile.role.idRole ? true : null ">{{role.role}}</option>
									</select>
								</div>
							</div>
							<div class="col-lg-4">
								<div class="form-group">
									<label class="form-control-label">Username</label> 
									<input id="username" type="text" class="form-control form-control-sm" [readonly]="true" 
										required [(ngModel)]="userProfile && userProfile.username" name="username">
								</div>
							</div>
							<div class="col-lg-4">
								<div class="form-group">
									<label class="form-control-label">Email</label> 
									<input id="email" type="email" class="form-control form-control-sm" #email="ngModel" 
										required email [(ngModel)]="userProfile && userProfile.email" name="email">
									<div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
										<div *ngIf="email.errors.required">Email is Required</div>
										<div *ngIf="email.errors.email">Please enter an email address</div>
									</div>
								</div>
							</div>
						</div>
						<div class="form-group float-right">
							<input type="submit" value="Save" class="btn btn-success" [disabled]="!userProfileForm.form.valid">
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</section>
